{
	"info": {
		"_postman_id": "0285cc77-8b91-46e2-a376-5d7f95bffbcf",
		"name": "tela-vermelha",
		"description": "Tela Vermelha - Projeto usando AppSync para integrar em nossas Pocs",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "34147716",
		"_collection_link": "https://dddd00-7283.postman.co/workspace/Claro-SA~b1e992c1-8f12-4c1c-8fa9-116e2669d868/collection/34147716-0285cc77-8b91-46e2-a376-5d7f95bffbcf?action=share&source=collection_link&creator=34147716"
	},
	"item": [
		{
			"name": "users",
			"item": [
				{
					"name": "Add User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"followRedirects": true,
						"disableUrlEncoding": false,
						"disableCookies": false
					},
					"request": {
						"auth": {
							"type": "apikey",
							"apikey": [
								{
									"key": "value",
									"value": "{{api_key_tela_vermelha}}",
									"type": "string"
								},
								{
									"key": "key",
									"value": "x-api-key",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "User-Agent",
								"value": "insomnia/9.3.3"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation ($name: String!, $email: String!, $password: String!) {\n  addUser(input: {\n    name: $name,\n    email: $email,\n    password: $password\n  }) {\n    id\n    name\n    email\n    active\n\t\tisAdmin\n    createdAt\n    updatedAt\n  }\n}\n",
								"variables": "{\n\t\"name\": \"Rafael Monteiro Arjonas\",\n\t\"email\": \"rafael.arjonas@claro.com.br\",\n\t\"password\": \"F@zer250\"\n}"
							}
						},
						"url": {
							"raw": "{{uri_tela_vermelha}}/",
							"host": [
								"{{uri_tela_vermelha}}"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Active user",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"followRedirects": true,
						"disableUrlEncoding": false,
						"disableCookies": false
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token_tela_vermelha}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "User-Agent",
								"value": "insomnia/9.3.3"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation ($isActive: Boolean!, $userEmail: String!) {\n  activateUser(input: {\n    isActive: $isActive,\n    userEmail: $userEmail\n  }) {\n    id\n    name\n    email\n    active\n\t\tisAdmin\n    createdAt\n    updatedAt\n  }\n}\n",
								"variables": "{\n\t\"isActive\": true,\n\t\"userEmail\": \"rafaelmonteiroarj@gmail.com\"\n}"
							}
						},
						"url": {
							"raw": "{{uri_tela_vermelha}}/",
							"host": [
								"{{uri_tela_vermelha}}"
							],
							"path": [
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Captura a resposta da requisição\r",
									"const response = pm.response.json();\r",
									"\r",
									"// Acessa o token na estrutura da resposta\r",
									"const token = response.data.login.token;\r",
									"\r",
									"const userId = response.data.login.user.id;\r",
									"\r",
									"// Atualiza a variável do ambiente com o novo token\r",
									"pm.environment.set(\"token_tela_vermelha\", token);\r",
									"pm.environment.set(\"user_id\", userId)\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"followRedirects": true,
						"disableUrlEncoding": false,
						"disableCookies": false
					},
					"request": {
						"auth": {
							"type": "apikey",
							"apikey": [
								{
									"key": "value",
									"value": "{{api_key_tela_vermelha}}",
									"type": "string"
								},
								{
									"key": "key",
									"value": "x-api-key",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "User-Agent",
								"value": "insomnia/9.3.3"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "mutation ($email: String!, $password: String!) {\n  login(input: {\n    email: $email,\n    password: $password\n  }) {\n    token,\n\t\tuser {\n\t\t\tid\n\t\t\tname\n\t\t}\n  }\n}\n",
								"variables": "{\n\t\"email\": \"rafael.arjonas@claro.com.br\",\n\t\"password\": \"F@zer250\"\n}"
							}
						},
						"url": {
							"raw": "{{uri_tela_vermelha}}",
							"host": [
								"{{uri_tela_vermelha}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Users",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"followRedirects": true,
						"disableUrlEncoding": false,
						"disableCookies": false
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token_tela_vermelha}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "User-Agent",
								"value": "insomnia/9.3.3"
							}
						],
						"body": {
							"mode": "graphql",
							"graphql": {
								"query": "query {\n  getUsers {\n    id\n    name\n    email\n    active\n    isAdmin\n    createdAt\n    updatedAt\n  }\n}"
							}
						},
						"url": {
							"raw": "{{uri_tela_vermelha}}",
							"host": [
								"{{uri_tela_vermelha}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "click-alert",
			"item": [
				{
					"name": "chat",
					"item": [
						{
							"name": "Answers",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": true,
								"disableUrlEncoding": false,
								"disableCookies": false
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token_tela_vermelha}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "User-Agent",
										"value": "insomnia/9.3.3"
									}
								],
								"body": {
									"mode": "graphql",
									"graphql": {
										"query": "mutation ($query: String!, $chatId: String!, $userId: String!, $additionalInformation: Boolean) {\n  answers(input: {query: $query, chatId: $chatId, userId: $userId, additionalInformation: $additionalInformation}) {\n\t\tquery\n        reasoning {\n        action\n        observation\n        }\n        response\n        costs {\n         totalCost\n         totalCostBRL\n         totalTokens\n         promptTokens\n         completionTokens\n         totalRequests\n        }\n\t}\n}",
										"variables": "{\n\t\"query\": \"Oi\",\n\t\"chatId\": \"12309877\",\n    \"userId\": \"9eca540e-2426-4043-9599-7620a2190fc7\",\n    \"additionalInformation\": false\n}"
									}
								},
								"url": {
									"raw": "{{uri_tela_vermelha}}/",
									"host": [
										"{{uri_tela_vermelha}}"
									],
									"path": [
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "Remove Session Chat",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": true,
								"disableUrlEncoding": false,
								"disableCookies": false
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token_tela_vermelha}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "User-Agent",
										"value": "insomnia/9.3.3"
									}
								],
								"body": {
									"mode": "graphql",
									"graphql": {
										"query": "mutation ($threadId: String!) {\n  removeChatSession(input: {threadId: $threadId})\n}",
										"variables": "{\n\t\"threadId\": \"123456\"\n}"
									}
								},
								"url": {
									"raw": "{{uri_tela_vermelha}}/",
									"host": [
										"{{uri_tela_vermelha}}"
									],
									"path": [
										""
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "feedbacks",
					"item": [
						{
							"name": "Add Feedback",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": true,
								"disableUrlEncoding": false,
								"disableCookies": false
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token_tela_vermelha}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "User-Agent",
										"value": "insomnia/9.3.3"
									}
								],
								"body": {
									"mode": "graphql",
									"graphql": {
										"query": "mutation ($input: FeedbackInput!) {\n  addFeedback(input: $input) {\n    answer\n    createdAt\n    comment\n    feedback\n    id\n    question\n    questionId\n    chatId\n    userId\n    userName\n  }\n}\n",
										"variables": "{\n   \"input\": {\n    \"userId\": \"9eca540e-2426-4043-9599-7620a2190fc7\",\n    \"userName\": \"Rafael Monteiro Arjonas\",\n    \"answer\": \"Test\",\n    \"comment\": \"FDSAFDA\",\n    \"feedback\": false,\n    \"question\": \"SAFDSAF\",\n    \"questionId\": \"FDASFDAS\",\n    \"chatId\": \"36df628d-bacd-4692-9d54-2d1a6a18d37f\"\n   }\n}"
									}
								},
								"url": {
									"raw": "{{uri_tela_vermelha}}/",
									"host": [
										"{{uri_tela_vermelha}}"
									],
									"path": [
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Feedbacks",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": true,
								"disableUrlEncoding": false,
								"disableCookies": false
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token_tela_vermelha}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "User-Agent",
										"value": "insomnia/9.3.3"
									}
								],
								"body": {
									"mode": "graphql",
									"graphql": {
										"query": "query {\n  getFeedbacks {\n    answer\n    comment\n    createdAt\n    feedback\n    id\n    question\n    questionId\n    chatId\n    userId\n    userName\n  }\n}"
									}
								},
								"url": {
									"raw": "{{uri_tela_vermelha}}/",
									"host": [
										"{{uri_tela_vermelha}}"
									],
									"path": [
										""
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "alerts",
					"item": [
						{
							"name": "Get Alerts",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": true,
								"disableUrlEncoding": false,
								"disableCookies": false
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token_tela_vermelha}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "User-Agent",
										"value": "insomnia/9.3.3"
									}
								],
								"body": {
									"mode": "graphql",
									"graphql": {
										"query": "query {\n  getAlerts {\n    advertiser\n    city\n    createdAt\n    dtRef\n    id\n    message\n    speed\n    type\n    answers {\n        costs {\n            completionTokens\n            promptTokens\n            totalCost\n            totalCostBRL\n            totalRequests\n            totalTokens\n        }\n        query\n        reasoning {\n            action\n            observation\n        }\n        response\n    }\n  }\n}"
									}
								},
								"url": {
									"raw": "{{uri_tela_vermelha}}/",
									"host": [
										"{{uri_tela_vermelha}}"
									],
									"path": [
										""
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "conversation-history",
					"item": [
						{
							"name": "Get Answers",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"protocolProfileBehavior": {
								"followRedirects": true,
								"disableUrlEncoding": false,
								"disableCookies": false
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{token_tela_vermelha}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "User-Agent",
										"value": "insomnia/9.3.3"
									}
								],
								"body": {
									"mode": "graphql",
									"graphql": {
										"query": "query {\n  getAnswers {\n    id\n    createdAt\n    chatId\n    userId\n    query \n    reasoning {\n        action\n        observation\n    }\n    response\n    costs {\n        completionTokens\n        promptTokens\n        totalCost\n        totalCostBRL\n        totalRequests\n        totalTokens\n    }\n  }\n}"
									}
								},
								"url": {
									"raw": "{{uri_tela_vermelha}}/",
									"host": [
										"{{uri_tela_vermelha}}"
									],
									"path": [
										""
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	],
	"variable": [
		{
			"key": "uri_tela_vermelha",
			"value": "https://ydzbboffgrb7xaykf56ucn2vku.appsync-api.us-east-1.amazonaws.com/graphql"
		},
		{
			"key": "api_key_tela_vermelha",
			"value": "da2-cnc27kjtujcsvpx6vw47nnzkg4"
		},
		{
			"key": "token",
			"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImU2NDVmOWMwLWU5NzItNGExOS1iZWZhLTNjNGU4YjVmZGY2NiIsIm5hbWUiOiJSYWZhZWwgTW9udGVpcm8gQXJqb25hcyIsImVtYWlsIjoicmFmYWVsbW9udGVpcm9hcmpAZ21haWwuY29tIiwiYWN0aXZlIjp0cnVlLCJpc0FkbWluIjpmYWxzZSwicGFzc3dvcmQiOiJVMkZzZEdWa1gxK0psMnFlMDY3NnVkWEV5S1gyZUl2STRGcWRpdDlUREJvPSIsImNyZWF0ZWRBdCI6IjIwMjQtMDgtMjNUMTE6NDc6NDAuMTEwWiIsInVwZGF0ZWRBdCI6IjIwMjQtMDgtMjNUMTE6NDc6NDAuMTEwWiIsImlhdCI6MTcyNDU0ODQzOCwiZXhwIjoxNzI0NTUwMjM4fQ.YDYfa0TzcqlrPU7jSS-OO0-_ElIHAPbfbuRVpzh6ul4"
		}
	]
}