GetUsers:
  handler: dist/users/infra/adapter/input/handler.getUsers
  name: ${self:service}-${self:provider.stage}-getUsers
  environment:
    DYNAMODB_TABLE: { "Ref": "UserTable"}

AddUser:
  handler: dist/users/infra/adapter/input/handler.addUser
  name: ${self:service}-${self:provider.stage}-addUser
  environment:
    DYNAMODB_TABLE: { "Ref": "UserTable"}
    JWT_SECRET: ${file(./ymls/environment.yml):${opt:stage}.JWT_SECRET}

Login:
  handler: dist/users/infra/adapter/input/handler.login
  name: ${self:service}-${self:provider.stage}-login
  environment:
    DYNAMODB_TABLE: { "Ref": "UserTable"}
    JWT_SECRET: ${file(./ymls/environment.yml):${opt:stage}.JWT_SECRET}


Invoke:
  handler: dist/users/infra/adapter/input/handler.invoke
  name: ${self:service}-${self:provider.stage}-invoke
  events:
    - http:
        path: /invoke
        method: post
        authorizer: authorizer

authorizer:
  handler: dist/users/infra/adapter/input/handler.authorizer
  environment:
    JWT_SECRET: ${file(./ymls/environment.yml):${opt:stage}.JWT_SECRET}
